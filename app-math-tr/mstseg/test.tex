\documentclass[12pt,fleqn]{article}\usepackage{../common}
\begin{document}

\begin{minted}[fontsize=\footnotesize]{python}
A = sps.lil_matrix((5,5))
A[0,1] = 0.5
A[1,0] = 0.5
A[1,2] = 1.0
A[2,1] = 1.0
A[2,3] = 0.33
A[3,2] = 0.33
A[0,4] = 0.5
A[4,0] = 0.5
mmwrite('./felzclust/test2.mtx',A)
\end{minted}

\begin{minted}[fontsize=\footnotesize]{python}
import pandas as pd
data = pd.read_csv("../kmeans/synthetic.txt",names=['a','b'],sep="   ")
print data.shape
data = np.array(data)
\end{minted}

\begin{verbatim}
(3000, 2)
\end{verbatim}

\begin{minted}[fontsize=\footnotesize]{python}
from sklearn.metrics.pairwise import euclidean_distances
X = euclidean_distances(data, data)
print X.shape
print X[1,2]
\end{minted}

\begin{verbatim}
(3000, 3000)
622.540761718
\end{verbatim}

\begin{minted}[fontsize=\footnotesize]{python}
print X.mean(), X.std()
print X.shape
X2 = X.copy()
X2[X > 2000] = 0.0
print X2.shape
X3 = sps.lil_matrix(X2)
print len(X3.nonzero()[0])
print X3.shape
\end{minted}

\begin{verbatim}
23275.2891376 13430.4720182
(3000, 3000)
(3000, 3000)
174020
(3000, 3000)
\end{verbatim}

\begin{minted}[fontsize=\footnotesize]{python}
import scipy.sparse as sps
from scipy.io import mmwrite, mmread
mmwrite('/tmp/syndist', X3)
\end{minted}


\begin{minted}[fontsize=\footnotesize]{python}
!./felzclust/test /tmp/syndist.mtx 20000  > /tmp/out
\end{minted}

\begin{minted}[fontsize=\footnotesize]{python}
df = pd.read_csv('/tmp/out',sep=';')
\end{minted}

\begin{minted}[fontsize=\footnotesize]{python}
colors = ['r','g','b','c','y']
for clust in df['cluster'].unique():
    print clust
    break
\end{minted}

\begin{verbatim}
2953
\end{verbatim}














\end{document}
